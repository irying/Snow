### 过期键删除策略

如果一个键过期了，那么它什么时候被删除呢？

这个问题有三种可能的答案，它们分别代表3种删除策略：

1.定时删除：在设置键的过期时间同时，创建一个定时器，让定时器执行删除。(占用cpu，cpu应该把时间放在重要的事情上，不能影响响应时间和吞吐量)

2.惰性删除：先不管，每次从键空间获取键时，都检查取得的键是否过期，过期就删除

3.定期删除：每隔一段时间，程序就对数据库进行一次检查，删除里面的过期键。至于删除多少过期键，与及要检查多少个数据库，则由算法决定。



redis有个周期性操作，serverCron函数，相当于计划任务。这个函数执行体里面会调用定期删除策略activeExpireCycle函数。

函数每次执行时，都从一定数量的数据库中取出一定数量的随机键进行检查，并删除其中的过期键。