# 用户行为统计分析系统架构设计

来自http://blog.sina.cn/dpool/blog/s/blog_6f52b9e90100oubl.html

项目需求
1.**流量统计**：统计应用程序的总用户数，每日新增用户数，并且以丰富的图表形式展现出来，让市场人员更好的掌握应用程序的增长趋势，销售情况等。

2.**行为分析**：分析应用程序每天的使用情况，包括活跃用户，启动次数，每次用户使用时长以及应用程序的活跃程度。帮助市场人员更好的了解用户对应用程序的使用程度，广告价值等。了解到用户来自哪里（针对中国用户的地理分布到省市级别），在使用什么型号的手机，所基于操作系统版本等信息, 以帮助开发人员改进应用程序，挖掘很深度的商业价值。记录单个用户的使用频率，绘制出一条用户使用趋势的曲线，通过它了解到应用程序的生命周期，**用户使用的频繁程度等信息**。



设计思路
1.在手机应用程序里集成统计代码，当用户执行某些行为动作时，向服务器发送请求；（埋点）
2.日志服务器保存用户请求日志，定期切割；
3.用户行为分析器对行为日志进行分析，汇总统计数据；
4.市场人员登陆统计后台查看统计分析结果。



1.统计模块：[HttpEmptyGifModule](http://wiki.nginx.org/HttpEmptyGifModule),用户向服务器发送HTTP请求，服务器返回一张1x1的gif图片。目前百度统计和Google分析都是这样的做法。
2.日志切割：利用系统的定期任务Crontab，对Nginx的log进行切割保存备份。
3.行为分析：分析器对切割好的日志进行分析统计，把结果汇总写入数据库。（分析器目前采用Python来写，当然Perl/PHP也可以；统计结果数据采用MySQL，你也可以根据你的喜好改用别的数据库，NOSQL数据库也是一个不错的选择）
4.统计后台：用Jquery+[Highcharts](http://www.highcharts.com/) 呈现统计结果（做图表的工具有很多，如：[FusionChart](http://www.fusioncharts.com/)，[amCharts](http://www.amcharts.com/)）。



统计报表，流量统计，活跃用户变化趋势，设备型号分布